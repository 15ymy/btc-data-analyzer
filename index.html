<!DOCTYPE html>
<html>
<head>
  <title>数据提取和计算</title>
</head>
<body>
  <h1>请将数据粘贴到下面的文本框中:</h1>
  <textarea id="data-input" rows="10" cols="50"></textarea>
  <br>
  <button onclick="calculateSum()">计算结果</button>
  <br>
  <h2>结果:</h2>
  <p id="result"></p>

  <script>
    function calculateSum() {
      const data = document.getElementById('data-input').value;
      const lines = data.split('\n');
      const values = {};

      for (let line of lines) {
        const match = line.match(/(\d+[a-z]): (-?\d+(\.\d+)?)(m|b|k)/i);
        if (match) {
          const period = match[1];
          let value = parseFloat(match[2]);
          const unit = match[4].toLowerCase();

          if (!values[period]) {
            values[period] = 0;
          }

          if (unit === 'b') {
            value *= 1000;
          } else if (unit === 'k') {
            value /= 1000;
          }

          values[period] += value;
        }
      }

      let sum = 0;
      for (let period in values) {
        sum += values[period];
      }

      document.getElementById('result').innerText = `总和为: ${sum.toFixed(2)} 百万美元`;
    }
  </script>
</body>
</html>
